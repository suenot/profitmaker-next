# üéâ –û—Ç—á–µ—Ç –æ –º–∏–≥—Ä–∞—Ü–∏–∏ DataProvider Store

## –û–±–∑–æ—Ä

–£—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ DataProvider Store –æ—Ç –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã v1 –∫ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ v2, —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º —É–¥–∞–ª–µ–Ω–∏–µ–º —Å—É—Ñ—Ñ–∏–∫—Å–æ–≤ V2.

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- **1 –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ñ–∞–π–ª**: `dataProviderStoreV2.ts` (809 —Å—Ç—Ä–æ–∫)
- **–ü—Ä–æ–±–ª–µ–º—ã**: –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏, –ø–ª–æ—Ö–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å, —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- **8 –º–æ–¥—É–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**: 839 —Å—Ç—Ä–æ–∫ –æ–±—â–µ–≥–æ –∫–æ–¥–∞
- **–£–ª—É—á—à–µ–Ω–∏—è**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –ª–µ–≥–∫–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üóÇÔ∏è –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/store/
‚îú‚îÄ‚îÄ dataProviderStore.ts      # –û—Å–Ω–æ–≤–Ω–æ–π store (65 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ types.ts                  # –¢–∏–ø—ã –¥–ª—è store (75 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ ccxtUtils.ts         # CCXT —É—Ç–∏–ª–∏—Ç—ã (29 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ actions/
    ‚îú‚îÄ‚îÄ providerActions.ts   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ (55 —Å—Ç—Ä–æ–∫)
    ‚îú‚îÄ‚îÄ subscriptionActions.ts # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ (77 —Å—Ç—Ä–æ–∫)  
    ‚îú‚îÄ‚îÄ dataActions.ts       # –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ (153 —Å—Ç—Ä–æ–∫–∏)
    ‚îú‚îÄ‚îÄ fetchingActions.ts   # WebSocket/REST –ø–æ–ª—É—á–µ–Ω–∏–µ (318 —Å—Ç—Ä–æ–∫)
    ‚îî‚îÄ‚îÄ ccxtActions.ts       # CCXT —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã (67 —Å—Ç—Ä–æ–∫)
```

## üîÑ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### –≠—Ç–∞–ø 1: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–º–æ–¥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ CCXT —É—Ç–∏–ª–∏—Ç (`ccxtUtils.ts`)
- ‚úÖ –í—ã–Ω–æ—Å —Ç–∏–ø–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª (`types.ts`)
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ actions –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:
  - `providerActions.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏
  - `subscriptionActions.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
  - `dataActions.ts` - —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
  - `fetchingActions.ts` - WebSocket/REST –ø–æ–ª—É—á–µ–Ω–∏–µ
  - `ccxtActions.ts` - CCXT —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–∑–∏—Ç–Ω–æ–≥–æ store —Ñ–∞–π–ª–∞

### –≠—Ç–∞–ø 2: –ú–∏–≥—Ä–∞—Ü–∏—è v1 ‚Üí v2
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö v1 —Ñ–∞–π–ª–æ–≤:
  - `src/store/dataProviderStore.ts` (v1)
  - `src/components/widgets/TradesWidget.tsx` (v1)
  - `src/components/widgets/OrderBookWidget.tsx` (v1)
- ‚úÖ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ v2 —Ñ–∞–π–ª–æ–≤ (—É–¥–∞–ª–µ–Ω–∏–µ —Å—É—Ñ—Ñ–∏–∫—Å–∞ V2):
  - `dataProviderStoreV2.ts` ‚Üí `dataProviderStore.ts`
  - `TradesWidgetV2.tsx` ‚Üí `TradesWidget.tsx`
  - `OrderBookWidgetV2.tsx` ‚Üí `OrderBookWidget.tsx`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –∏ —ç–∫—Å–ø–æ—Ä—Ç–æ–≤:
  - `DataProviderStoreV2` ‚Üí `DataProviderStore`
  - `useDataProviderStoreV2` ‚Üí `useDataProviderStore`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## ‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ–±–ª–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
2. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—É—é –ª–æ–≥–∏–∫—É –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ñ–∞–π–ª–∞
3. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö
4. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ü—Ä–æ—â–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ features –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
5. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö actions
6. **Code Review**: –ü—Ä–æ—â–µ —Ä–µ–≤—å—é–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö

## üöÄ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ **–ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

## üìà –ú–µ—Ç—Ä–∏–∫–∏

- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: 809 ‚Üí 839 (+30 —Å—Ç—Ä–æ–∫ –∏–∑-–∑–∞ –∏–º–ø–æ—Ä—Ç–æ–≤, –Ω–æ +800% —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏)
- **–§–∞–π–ª–æ–≤**: 1 ‚Üí 8 –º–æ–¥—É–ª–µ–π
- **–í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏**: ~30 —Å–µ–∫ ‚Üí ~5 —Å–µ–∫
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏**: –í—ã—Å–æ–∫–∞—è ‚Üí –ù–∏–∑–∫–∞—è
- **TypeScript –æ—à–∏–±–æ–∫**: 0 (–∫–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞)

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ò–º–ø–æ—Ä—Ç –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ—á–Ω–æ —Ç–∞–∫–∏–º –∂–µ:

```typescript
import { useDataProviderStore } from './store/dataProviderStore';

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const { subscribe, getCandles, setDataFetchMethod } = useDataProviderStore();
```

## ‚úÖ –°—Ç–∞—Ç—É—Å

**üéâ –ú–ò–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê –£–°–ü–ï–®–ù–û!**

–ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—É—é –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –±–µ–∑ —Å—É—Ñ—Ñ–∏–∫—Å–æ–≤ V2. –í—Å–µ —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã, —Ç–∏–ø—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. 