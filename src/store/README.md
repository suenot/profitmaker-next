# DataProvider Store - –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É DataProvider Store –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –æ—Ç –±–æ–ª—å—à–∏—Ö –º–æ–Ω–æ–ª–∏—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∫ –ª–æ–≥–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–º –º–æ–¥—É–ª—è–º.

## üéØ –¶–µ–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**: –†–∞–∑–±–∏—Ç—å —Ñ–∞–π–ª 809 —Å—Ç—Ä–æ–∫ –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**: –õ–µ–≥—á–µ –Ω–∞—Ö–æ–¥–∏—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å  
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ü—Ä–æ—â–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ features –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/store/
‚îú‚îÄ‚îÄ dataProviderStore.ts      # –û—Å–Ω–æ–≤–Ω–æ–π store (65 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ types.ts                  # –¢–∏–ø—ã –¥–ª—è store (75 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ ccxtUtils.ts         # CCXT —É—Ç–∏–ª–∏—Ç—ã (29 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ actions/
    ‚îú‚îÄ‚îÄ providerActions.ts   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ (55 —Å—Ç—Ä–æ–∫)
    ‚îú‚îÄ‚îÄ subscriptionActions.ts # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ (77 —Å—Ç—Ä–æ–∫)  
    ‚îú‚îÄ‚îÄ dataActions.ts       # –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ (153 —Å—Ç—Ä–æ–∫–∏)
    ‚îú‚îÄ‚îÄ fetchingActions.ts   # WebSocket/REST –ø–æ–ª—É—á–µ–Ω–∏–µ (318 —Å—Ç—Ä–æ–∫)
    ‚îî‚îÄ‚îÄ ccxtActions.ts       # CCXT —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã (67 —Å—Ç—Ä–æ–∫)
```

## üîß –ú–æ–¥—É–ª–∏

### 1. –û—Å–Ω–æ–≤–Ω–æ–π Store (`dataProviderStore.ts`)
- –°–æ–∑–¥–∞–Ω–∏–µ Zustand store —Å middleware (immer, subscribeWithSelector)
- –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –≤—Å–µ—Ö action –º–æ–¥—É–ª–µ–π
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å default provider

### 2. –¢–∏–ø—ã (`types.ts`) 
- `DataProviderState` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `DataProviderActions` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–µ–π—Å—Ç–≤–∏–π
- `DataProviderStore` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∏–ø store

### 3. –£—Ç–∏–ª–∏—Ç—ã (`utils/ccxtUtils.ts`)
- `getCCXT()` - –ø–æ–ª—É—á–µ–Ω–∏–µ CCXT –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
- `getCCXTPro()` - –ø–æ–ª—É—á–µ–Ω–∏–µ CCXT Pro –¥–ª—è WebSocket

### 4. Actions

#### Provider Actions (`providerActions.ts`)
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö:
- `addProvider()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞  
- `removeProvider()` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
- `setActiveProvider()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

#### Subscription Actions (`subscriptionActions.ts`) 
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ —Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π:
- `subscribe()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ —Å —É–º–Ω–æ–π –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π
- `unsubscribe()` - –æ—Ç–ø–∏—Å–∫–∞ —Å –ø–æ–¥—Å—á–µ—Ç–æ–º –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤

#### Data Actions (`dataActions.ts`)
–†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
- `setDataFetchMethod()` - —Å–º–µ–Ω–∞ –º–µ—Ç–æ–¥–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (WebSocket/REST)
- `setRestInterval()` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ REST –∑–∞–ø—Ä–æ—Å–æ–≤
- `getCandles()`, `getTrades()`, `getOrderBook()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `updateCandles()`, `updateTrades()`, `updateOrderBook()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª—é—á–∞–º–∏ –ø–æ–¥–ø–∏—Å–æ–∫

#### Fetching Actions (`fetchingActions.ts`)
WebSocket –∏ REST –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:
- `startDataFetching()` - –∑–∞–ø—É—Å–∫ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏
- `stopDataFetching()` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- `startWebSocketFetching()` - WebSocket –ø–æ—Ç–æ–∫–∏ —á–µ—Ä–µ–∑ CCXT Pro
- `startRestFetching()` - REST polling —á–µ—Ä–µ–∑ CCXT

#### CCXT Actions (`ccxtActions.ts`)
CCXT —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
- `selectOptimalOrderBookMethod()` - –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä orderbook –º–µ—Ç–æ–¥–∞
- `cleanup()` - –æ—á–∏—Å—Ç–∫–∞ store

## üîÑ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ò–º–ø–æ—Ä—Ç –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ—á–Ω–æ —Ç–∞–∫–∏–º –∂–µ:

```typescript
import { useDataProviderStore } from './store/dataProviderStore';

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const { subscribe, getCandles, setDataFetchMethod } = useDataProviderStore();
```

## ‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ–±–ª–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
2. **–ò–∑–æ–ª—è—Ü–∏—è**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–æ–¥—É–ª–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ  
3. **–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: Actions –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö stores
4. **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –¥–µ–π—Å—Ç–≤–∏–π
5. **–î–µ–±–∞–≥**: –õ–µ–≥—á–µ –Ω–∞—Ö–æ–¥–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ–±–ª–µ–º –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ñ–∞–π–ª–∞
6. **Code Review**: –ü—Ä–æ—â–µ —Ä–µ–≤—å—é–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö

## üöÄ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ **–ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫, –≤—Å–µ —Ç–∏–ø—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π. 